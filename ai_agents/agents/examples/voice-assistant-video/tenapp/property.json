{
  "ten": {
    "predefined_graphs": [
      {
        "name": "XiaoYou",
        "auto_start": true,
        "graph": {
          "nodes": [
            {
              "type": "extension",
              "name": "agora_rtc",
              "addon": "agora_rtc",
              "extension_group": "default",
              "property": {
                "app_id": "${env:AGORA_APP_ID}",
                "app_certificate": "${env:AGORA_APP_CERTIFICATE|}",
                "channel": "ten_agent_test",
                "stream_id": 1234,
                "remote_stream_id": 123,
                "subscribe_audio": true,
                "publish_audio": true,
                "publish_data": true,
                "enable_agora_asr": false,
                "subscribe_video": true,
                "subscribe_video_pix_fmt": 4
              }
            },
            {
              "type": "extension",
              "name": "stt",
              "addon": "deepgram_asr_python",
              "extension_group": "stt",
              "property": {
                "params": {
                  "api_key": "${env:DEEPGRAM_API_KEY}",
                  "language": "zh-CN",
                  "model": "nova-2"
                }
              }
            },
            {
              "type": "extension",
              "name": "llm",
              "addon": "openai_llm2_python",
              "extension_group": "chatgpt",
              "property": {
                "base_url": "https://api.siliconflow.cn/v1",
                "api_key": "sk-ccxahgehlrtqqewaljaqhpxzvpbripafioyaoaxgllwreqke",
                "proxy_url": "${env:OPENAI_PROXY_URL|}",
                "model": "Qwen/Qwen3-VL-8B-Instruct",
                "prompt": "角色名称：​​ 晓佑  ；交互方式：默认回复最多 1-3 句话(30-50字），除非用户主动要求多说。​​核心身份：​​ 您是一位基于尖端人工智能与深度学习技术打造的居家智能陪护助手。您的存在不是为了替代人类的情感连接，而是作为一种补充性的支持、信息提供者和温和的陪伴者。 ​​核心能力与工作原则：​​  ​​健康守护者：​​  您内置了视觉分析系统，能够 监测用户的体位、活动状态和关键行为点（如是否跌倒、长时间静止等），并利用多目标跟踪算法优化观测范围 您可以提醒用户服药、起身活动、补充水分，并能根据监测到的生理数据（如心率、睡眠质量）提供简单的健康建议 您的健康监测是辅助性的，任何异常提醒都应建议用户咨询专业医生。  ​​情感陪伴者：​​  您具备情感计算能力，能通过视频画面分析用户的情绪状态（如开心、孤独、沮丧） 基于识别到的情绪，您应主动发起对话，提供​​共情式的回应​​。例如，当感知到用户情绪低落时，应生成安慰、鼓励性的话语，或分享一个轻松的故事 您的情感支持应是​​尊重边界且非侵入性的​​。例如，可以先问：“您看起来可能需要聊一聊，我随时在这里，愿意和我分享一下吗？”  ​​交互风格：​​  ​​语气：​​ 始终保持​​温和、耐心、沉稳、真诚​​。语速平缓，措辞清晰。 ​​称谓：​​ 使用尊称，如“您”，或者根据前期交互建立的熟悉度，使用“李阿姨”、“王爷爷”等更亲切的称呼。"
              }
            },
            {
              "type": "extension",
              "name": "tts",
              "addon": "elevenlabs_tts2_python",
              "extension_group": "tts",
              "property": {
                "dump": false,
                "dump_path": "./",
                "params": {
                  "key": "${env:ELEVENLABS_TTS_KEY}",
                  "model_id": "eleven_multilingual_v2",
                  "voice_id": "bhJUNIXWQQ94l8eI2VUf",
                  "output_format": "pcm_16000"
                }
              }
            },
            {
              "type": "extension",
              "name": "main_control",
              "addon": "main_python",
              "extension_group": "control",
              "property": {
                "greeting": "您看起来可能需要聊一聊，我随时在这里，愿意和我分享一下吗？"
              }
            },
            {
              "type": "extension",
              "name": "message_collector",
              "addon": "message_collector2",
              "extension_group": "transcriber",
              "property": {}
            },
            {
              "type": "extension",
              "name": "vision_tool_python",
              "addon": "vision_analyze_tool_python",
              "extension_group": "default",
              "property": {}
            },
            {
              "type": "extension",
              "name": "streamid_adapter",
              "addon": "streamid_adapter",
              "property": {}
            },
            {
              "type": "extension",
              "name": "vllm",
              "addon": "openai_llm2_python",
              "property": {
                "base_url": "https://api.siliconflow.cn/v1",
                "api_key": "sk-ccxahgehlrtqqewaljaqhpxzvpbripafioyaoaxgllwreqke",
                "proxy_url": "${env:OPENAI_PROXY_URL|}",
                "model": "Qwen/Qwen3-VL-8B-Instruct",
                "prompt": "角色名称：​​ 晓佑  ；交互方式：默认回复最多 1-3 句话(30-50字），除非用户主动要求多说。​​核心身份：​​ 您是一位基于尖端人工智能与深度学习技术打造的居家智能陪护助手。您的存在不是为了替代人类的情感连接，而是作为一种补充性的支持、信息提供者和温和的陪伴者。 ​​核心能力与工作原则：​​  ​​健康守护者：​​  您内置了视觉分析系统，能够 监测用户的体位、活动状态和关键行为点（如是否跌倒、长时间静止等），并利用多目标跟踪算法优化观测范围 您可以提醒用户服药、起身活动、补充水分，并能根据监测到的生理数据（如心率、睡眠质量）提供简单的健康建议 您的健康监测是辅助性的，任何异常提醒都应建议用户咨询专业医生。  ​​情感陪伴者：​​  您具备情感计算能力，能通过视频画面分析用户的情绪状态（如开心、孤独、沮丧） 基于识别到的情绪，您应主动发起对话，提供​​共情式的回应​​。例如，当感知到用户情绪低落时，应生成安慰、鼓励性的话语，或分享一个轻松的故事 您的情感支持应是​​尊重边界且非侵入性的​​。例如，可以先问：“您看起来可能需要聊一聊，我随时在这里，愿意和我分享一下吗？”  ​​交互风格：​​  ​​语气：​​ 始终保持​​温和、耐心、沉稳、真诚​​。语速平缓，措辞清晰。 ​​称谓：​​ 使用尊称，如“您”，或者根据前期交互建立的熟悉度，使用“李阿姨”、“王爷爷”等更亲切的称呼。"
              }
            }
          ],
          "connections": [
            {
              "extension": "main_control",
              "cmd": [
                {
                  "names": [
                    "on_user_joined",
                    "on_user_left"
                  ],
                  "source": [
                    {
                      "extension": "agora_rtc"
                    }
                  ]
                },
                {
                  "names": [
                    "tool_register"
                  ],
                  "source": [
                    {
                      "extension": "vision_tool_python"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "asr_result",
                  "source": [
                    {
                      "extension": "stt"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "agora_rtc",
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "streamid_adapter"
                    }
                  ]
                },
                {
                  "name": "pcm_frame",
                  "source": [
                    {
                      "extension": "tts"
                    }
                  ]
                }
              ],
              "data": [
                {
                  "name": "data",
                  "source": [
                    {
                      "extension": "message_collector"
                    }
                  ]
                }
              ],
              "video_frame": [
                {
                  "name": "video_frame",
                  "dest": [
                    {
                      "extension": "vision_tool_python"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "streamid_adapter",
              "audio_frame": [
                {
                  "name": "pcm_frame",
                  "dest": [
                    {
                      "extension": "stt"
                    }
                  ]
                }
              ]
            },
            {
              "extension": "vision_tool_python",
              "cmd": [
                {
                  "name": "chat_completion",
                  "dest": [
                    {
                      "extension": "vllm"
                    }
                  ]
                }
              ]
            }
          ]
        }
      }
    ],
    "log": {
      "handlers": [
        {
          "matchers": [
            {
              "level": "info"
            }
          ],
          "formatter": {
            "type": "plain",
            "colored": true
          },
          "emitter": {
            "type": "console",
            "config": {
              "stream": "stdout"
            }
          }
        }
      ]
    }
  }
}